const bb_productData={product:{name:"Bổ não QA Gingko Biloba",price:25e4},options:{active:!0,opt_01:{quantity:1,percent:20.4},opt_02:{quantity:3,percent:30},opt_03:{quantity:6,percent:40}},promotion:{active:!0,minQuantity:2,minOrderCost:5e5,percent:15},shipping:{active:!0,baseShipCost:2e4,minOrderCost:3e5,percent:15}},bb_sellerContactData={address:"24/1/2A2 Chương Dương, Trần Phú, Hải Dương",phone:"0857319366",zalo:{note:"Liên hệ zalo",url01:"https://zalo.me/",url02:"https://zaloapp.com/qr/p/z29xq2umx020"},email:function(){const t=window.location.host.split(".");return t.shift(),"hello@"+t.join(".")}};function BB_preciousStone(){const t=document.querySelector("#form-shopping-product > span"),e=document.querySelector("#form-shopping-price > span"),n=document.querySelector("#form-shopping-quantity > span"),o=n.querySelector("input"),r=document.querySelector("#form-shopping-actualCost > span"),a=document.querySelector("#form-shopping-discount"),c=document.querySelector("#form-shopping-shipCost > span"),u=document.querySelector("#form-shopping-lastCost > span");t.textContent=bb_productData.product.name;let i=document.createElement("small");i.innerHTML=`Đơn trên ${q(bb_productData.shipping.minOrderCost-1e3,0)}<sup>đ</sup> miễn phí vận chuyển, giảm thêm ${bb_productData.shipping.percent}% cho đơn trên ${q(bb_productData.promotion.minOrderCost-1e3,0)}`,t.after(i),e.innerHTML=q(bb_productData.product.price,0)+"<sup>đ</sup>",y(o.value);const p=document.querySelector("#bb-form-contact-name > input"),l=document.querySelector("#bb-form-contact-phone > input"),s=document.querySelector("#bb-form-contact-address > input"),d=document.querySelector("#bb-form-contact-message > textarea"),b=document.querySelector("input.contact-form-button.contact-form-button-submit"),m=document.querySelector("p.contact-form-error-message"),h=[];[p,l,s].forEach(((e,n)=>{e.addEventListener("input",(r=>{let a;r.preventDefault(),0===n?(a=e.value.length>0,m.textContent="Tên khách hàng đang bị bỏ trống"):1===n?(a=10===e.value.length,m.textContent="Số điện thoại chưa đúng (10 số)",e.value=e.value.replace(/\D+/g,""),e.setAttribute("maxlength","10")):(a=e.value.length>=15,m.textContent="Thông tin phải chứa 15 ký tự trở lên"),a?(h[n]=1,e.style.cssText="background-color: none",m.textContent=""):(h[n]=0,e.style.cssText="background-color: #F2CAC8");if(h.reduce(((t,e)=>t*e))){const e="\n\n"+"-".repeat(50)+"\n\n";document.querySelector("textarea.contact-form-email-message").textContent=`${t.textContent}\nSố lượng: ${o.value} hộp\nPhải thu: ${u.textContent}\nPhí v.chuyển: ${c.textContent}${e}Tên khách: ${p.value}\nĐiện thoại: ${l.value}\nĐịa chỉ: ${s.value}${e}${d.value}`,document.querySelector("input.contact-form-email").value="mail@mail.mail",b.disabled=!1}else b.disabled=!0}))})),function(){const t=document.querySelector(".footer-contact-wrap");if(!t)return;const e=t.querySelector(".address"),n=t.querySelector(".phone"),o=t.querySelector(".zalo"),r=t.querySelector(".mail");[n,o,r].forEach(((t,e)=>{t.addEventListener("click",(function(t){t.preventDefault(),0===e&&window.open("tel:+84"+bb_sellerContactData.phone),1===e&&window.open(bb_sellerContactData.zalo.url01+bb_sellerContactData.phone),2===e&&window.open("mailto:"+bb_sellerContactData.email())}))}));let a=document.createElement("style");a.textContent=`.footer-contact-wrap .address::after {content: "${bb_sellerContactData.address}";} \t.footer-contact-wrap .phone::after {content: "0${q(bb_sellerContactData.phone.substring(1),0)}";}\t.footer-contact-wrap .zalo::after {content: "${bb_sellerContactData.zalo.note}";} \t.footer-contact-wrap .mail::after {content: "${bb_sellerContactData.email()}";}`,e.before(a)}(),bb_productData.options.active&&function(){const t=document.querySelector("#pricing");if(!t)return;const e=Object.values(bb_productData.options);[t.querySelector(".regular"),t.querySelector(".popular-plan"),t.querySelector(".best-value-plan")].forEach(((t,n)=>{const o=bb_productData.product.price*(100-e[n+1].percent)/100;t.querySelector(".price").innerHTML=`${q(o,1e3)}`,t.querySelector(".total").innerHTML=`(Tổng ${q(o*e[n+1].quantity,1e3)})`,t.querySelector(".save").innerHTML=`Giảm ${q(e[n+1].percent,1)}%`,t.dataset.bbOrderstart=e[n+1].quantity}))}();const f=document.querySelector("#bb-contact-form");function y(t){let n=parseInt(t,10)*bb_productData.product.price,i=[],p=0,l=0;if(bb_productData.promotion.active&&(t>=bb_productData.promotion.minQuantity||n>=bb_productData.promotion.minOrderCost)&&i.push(n*bb_productData.promotion.percent/100),bb_productData.options.active){let e=Object.values(bb_productData.options).map((e=>{if(t>=e.quantity)return e.percent}));e=e.filter(Boolean),e.length&&(e=e.reduce(((t,e)=>t>e?t:e)),i.push(n*e/100))}i.length?(i=i.reduce(((t,e)=>t.quantity<e.quantity?t:e)),p=n-i):i=0,bb_productData.shipping.active&&p<bb_productData.shipping.minOrderCost&&(l=bb_productData.shipping.baseShipCost),o.value=t,e.innerHTML=`${q(p/t,1e3)}<sup>đ</sup> \t\t<s>${q(bb_productData.product.price,1e3)}<sup>đ</sup></s>`,r.innerHTML=`${q(n,1e3)}<sup>đ</sup>`,a.querySelector("label").innerHTML=`Giảm ${(100*i/n).toFixed(1)}%`,a.querySelector("span").innerHTML=`-${q(i,1e3)}<sup>đ</sup>`,c.innerHTML=`${q(l,1e3)}<sup>đ</sup>`,u.innerHTML=`${q(p+l,1e3)}<sup>đ</sup>`}function q(t,e){return Number.isInteger(e)&&e>0&&(t=Math.round(t/e)*e),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}document.querySelectorAll("[data-bb-orderstart]").forEach((function(t){t.href="javascript:void(0)",t.addEventListener("click",(e=>{e.preventDefault(),function(t){let e=parseInt(t,10);if(!e)return;y(e),n.querySelector("button:nth-last-child(1)").addEventListener("click",(t=>{t.preventDefault(),e++,y(e)})),n.querySelector("button:nth-child(1)").addEventListener("click",(t=>{t.preventDefault(),e>1&&(e--,y(e))})),o.addEventListener("input",(t=>{t.preventDefault(),o.value=o.value.replace(/\D+/g,""),y(o.value)}))}(t.dataset.bbOrderstart),f.style.cssText="display: flex; position: fixed"}))})),document.querySelector("[data-bb-orderclose]").onclick=function(){f.style.display="none"},window.onclick=function(t){t.target==f&&(f.style.display="none")}}BB_preciousStone();
