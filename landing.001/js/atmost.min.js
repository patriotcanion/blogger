function BB_rawDatabase(){return{product:{product:{name:"Bổ não QA Gingko Biloba",price:25e4},options:{active:!0,opt_01:{quantity:1,percent:20.4},opt_02:{quantity:3,percent:26},opt_03:{quantity:6,percent:33.4}},promotion:{active:!0,minQuantity:2,minOrderCost:5e5,percent:15},shipping:{active:!0,baseShipCost:2e4,minOrderCost:3e5,percent:15}},seller:{store:{onlineUrl:"https://bio.linhdan.top/",offlineUrl:"https://bio.linhdan.top/"},address:"24/1/2A2 Chương Dương, Trần Phú, Hải Dương",phone:"0857319366",zalo:{url01:"https://zalo.me/",url02:"https://zaloapp.com/qr/p/z29xq2umx020/"},email:function(){const e=window.location.hostname.split(".");return e.shift(),"hello@"+e.join(".")},website:function(){const e=window.location.hostname.split(".");return e.shift(),e.join(".")}}}}function BB_preciousStone(){const e=BB_rawDatabase(),t=e.product,n=e.seller,o=document.querySelector("#form-shopping-product > span"),r=document.querySelector("#form-shopping-price > span"),c=document.querySelector("#form-shopping-quantity > span"),i=c.querySelector("input"),a=document.querySelector("#form-shopping-actualCost > span"),u=document.querySelector("#form-shopping-discount"),p=document.querySelector("#form-shopping-shipCost > span"),l=document.querySelector("#form-shopping-lastCost > span");o.textContent=t.product.name;let s=document.createElement("small");s.innerHTML=`Đơn trên ${v(t.shipping.minOrderCost-1e3,0)}<sup>đ</sup> miễn phí vận chuyển, giảm thêm ${t.shipping.percent}% cho đơn trên ${v(t.promotion.minOrderCost-1e3,0)}`,o.after(s),r.innerHTML=v(t.product.price,0)+"<sup>đ</sup>",g(i.value);const d=document.querySelector("#bb-form-contact-name > input"),m=document.querySelector("#bb-form-contact-phone > input"),h=document.querySelector("#bb-form-contact-address > input"),f=document.querySelector("#bb-form-contact-message > textarea"),y=document.querySelector("input.contact-form-button.contact-form-button-submit"),q=document.querySelector("p.contact-form-error-message"),b=[];[d,m,h].forEach(((e,t)=>{e.addEventListener("input",(n=>{let r;n.preventDefault(),0===t?(r=e.value.length>0,q.textContent="Tên khách hàng đang bị bỏ trống"):1===t?(r=10===e.value.length,q.textContent="Số điện thoại chưa đúng (10 số)",e.value=e.value.replace(/\D+/g,""),e.setAttribute("maxlength","10")):(r=e.value.length>=15,q.textContent="Thông tin phải chứa 15 ký tự trở lên"),r?(b[t]=1,e.style.cssText="background-color: none",q.textContent=""):(b[t]=0,e.style.cssText="background-color: #F2CAC8");if(b.reduce(((e,t)=>e*t))){const e="\n\n"+"-".repeat(50)+"\n\n";document.querySelector("textarea.contact-form-email-message").textContent=`${o.textContent}\nSố lượng: ${i.value} hộp\nPhải thu: ${l.textContent}\nPhí v.chuyển: ${p.textContent}${e}Tên khách: ${d.value}\nĐiện thoại: ${m.value}\nĐịa chỉ: ${h.value}${e}${f.value}`,document.querySelector("input.contact-form-email").value="mail@mail.mail",y.disabled=!1}else y.disabled=!0}))})),function(){const e=document.querySelector(".footer-marketplace-wrap"),t=document.querySelector(".footer-contact-wrap");if(!t)return;const o=e.querySelector(".online"),r=e.querySelector(".offline"),c=e.querySelector(".address"),i=t.querySelector(".phone"),a=t.querySelector(".zalo"),u=t.querySelector(".mail"),p=t.querySelector(".website");[o,r,i,a,u,p].forEach(((e,t)=>{e.addEventListener("click",(function(e){e.preventDefault(),0===t&&window.open(n.store.onlineUrl),1===t&&window.open(n.store.onlineUrl),2===t&&window.open("tel:+84"+n.phone),3===t&&window.open(n.zalo.url01+n.phone),4===t&&window.open("mailto:"+n.email()),5===t&&window.open(n.website())}))}));let l=document.createElement("style");l.textContent=`.footer-marketplace-wrap .online::after {content: "Shopee";} \t.footer-marketplace-wrap .offline::after {content: "Showroom"} \t.footer-marketplace-wrap .address::after {content: "${n.address}";} \t.footer-contact-wrap .phone::after {content: "0${v(n.phone.substring(1),0)}";} \t.footer-contact-wrap .zalo::after {content: "Liên hệ zalo";} \t.footer-contact-wrap .mail::after {content: "${n.email()}";} \t.footer-contact-wrap .website::after {content: "${n.website()}"} \t.footer-contact-wrap .website {display: none}`,c.before(l)}(),t.options.active&&function(){const e=document.querySelector("#pricing");if(!e)return;const n=Object.values(t.options);[e.querySelector(".regular"),e.querySelector(".popular-plan"),e.querySelector(".best-value-plan")].forEach(((e,o)=>{const r=t.product.price*(100-n[o+1].percent)/100;e.querySelector(".price").innerHTML=`${v(r,1e3)}`,e.querySelector(".total").innerHTML=`(Tổng ${v(r*n[o+1].quantity,1e3)})`,e.querySelector(".save").innerHTML=`Mã giảm ${v(n[o+1].percent,1)}%`,e.dataset.bbOrderstart=n[o+1].quantity})),document.querySelector("#paroller").querySelectorAll(".price").forEach(((e,o)=>{e.innerHTML=`${v(t.product.price*(100-n[o+1].percent)/100,1e3)} \t\t<span class="old-price">${v(t.product.price,1e3)}</span>`}))}();const S=document.querySelector("#bb-contact-form");function g(e){let n=parseInt(e,10)*t.product.price,o=[],c=0,s=0;if(t.promotion.active&&(e>=t.promotion.minQuantity||n>=t.promotion.minOrderCost)&&o.push(n*t.promotion.percent/100),t.options.active){let r=Object.values(t.options).map((t=>{if(e>=t.quantity)return t.percent}));r=r.filter(Boolean),r.length&&(r=r.reduce(((e,t)=>e>t?e:t)),o.push(n*r/100))}o.length?(o=o.reduce(((e,t)=>e.quantity<t.quantity?e:t)),c=n-o):o=0,t.shipping.active&&(s=c<t.shipping.minOrderCost?t.shipping.baseShipCost:-t.shipping.baseShipCost),i.value=e,r.innerHTML=`${v(c/e,1e3)}<sup>đ</sup> \t\t<s>${v(t.product.price,1e3)}<sup>đ</sup></s>`,a.innerHTML=`${v(n,1e3)}<sup>đ</sup>`,u.querySelector("label").innerHTML=`Giảm giá ${(100*o/n).toFixed(1)}%`,u.querySelector("span").innerHTML=`-${v(o,1e3)}<sup>đ</sup>`,p.innerHTML=`${v(s,1e3)}<sup>đ</sup>`,l.innerHTML=`${v(c+s,1e3)}<sup>đ</sup>`}function v(e,t){return Number.isInteger(t)&&t>0&&(e=Math.round(e/t)*t),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}document.querySelectorAll("[data-bb-orderstart]").forEach((function(e){e.href="javascript:void(0)",e.addEventListener("click",(t=>{t.preventDefault(),function(e){let t=parseInt(e,10);if(!t)return;g(t),c.querySelector("button:nth-last-child(1)").addEventListener("click",(e=>{e.preventDefault(),t++,g(t)})),c.querySelector("button:nth-child(1)").addEventListener("click",(e=>{e.preventDefault(),t>1&&(t--,g(t))})),i.addEventListener("input",(e=>{e.preventDefault(),i.value=i.value.replace(/\D+/g,""),g(i.value)}))}(e.dataset.bbOrderstart),S.style.cssText="display: flex; position: fixed"}))})),document.querySelector("[data-bb-orderclose]").onclick=function(){S.style.display="none"},window.onclick=function(e){e.target==S&&(S.style.display="none")}}BB_preciousStone();
